(this["webpackJsonptodo-list-react"]=this["webpackJsonptodo-list-react"]||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(7),i=n.n(a),o=n(8),r=n(2),u=n(6),s=n(0),d=function(e){return Object(s.jsx)("button",{onClick:function(){e.action()},children:e.buttonText})},f=function(e){var t=Object(c.useState)(e.defaultValue),n=Object(r.a)(t,2),a=n[0],i=n[1],o=function(t){e.action(t),i("")},u=Object(c.useRef)(null);return Object(c.useEffect)((function(){return u.current.focus()}),[]),Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("input",{type:"text",value:a,onChange:function(e){i(e.target.value)},onKeyPress:function(e){""!==a&&"Enter"===e.key&&o(a)},onKeyDown:function(t){"Escape"===t.key&&e.cancelAction()},ref:u}),Object(s.jsx)(d,{action:function(e){""!==a&&o(a)},buttonText:e.buttonText})]})},j=function(e){return Object(s.jsx)("div",{children:Object(s.jsx)(f,{action:function(t){return e.addItem(t,e.parentKey)},cancelAction:e.cancelAction,buttonText:"+",defaultValue:""})})},b=(n(14),function e(t){var n=Object(c.useState)(!1),a=Object(r.a)(n,2),i=a[0],o=a[1],b=Object(c.useState)(!1),l=Object(r.a)(b,2),m=l[0],O=l[1],I=function(){o(!i)},x=function(){O(!m),o(!1)};return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("div",{children:[i?Object(s.jsx)(f,{action:function(e){var n;t.editItem(t.data.key,t.parentKey,((n=t.data).name=e,n)),I()},buttonText:"Ok",defaultValue:t.data.name,cancelAction:I}):Object(s.jsx)("div",{className:t.data.isDone?"done":"",onClick:function(e){t.toggleDone(t.data.key,t.parentKey)},children:t.data.name}),!m&&Object(s.jsx)(d,{action:I,buttonText:i?"Cancel":"Edit"}),!(i||m)&&Object(s.jsx)(d,{action:function(){return t.removeItem(t.data.key,t.parentKey)},buttonText:"Delete"}),(i||m)&&Object(s.jsx)(d,{action:x,buttonText:m?"Cancel":"Add"}),m&&Object(s.jsx)(j,{addItem:t.addItem,parentKey:[t.data.key].concat(Object(u.a)(t.parentKey)),cancelAction:x}),t.data.subItems&&t.data.subItems.length>0&&Object(s.jsxs)(s.Fragment,{children:[t.data.subItems.reduce((function(e,t){return t.isDone?++e:e}),0),"/",t.data.subItems.length]})]}),t.data.subItems&&Object(s.jsx)("ul",{children:t.data.subItems.map((function(n){return Object(s.jsx)("li",{children:Object(s.jsx)(e,{data:n,removeItem:t.removeItem,toggleDone:t.toggleDone,editItem:t.editItem,addItem:t.addItem,parentKey:[t.data.key].concat(Object(u.a)(t.parentKey))})},n.key)}))})]})}),l=function(e){return Object(s.jsx)("ul",{children:e.items.map((function(t){return Object(s.jsx)("li",{children:Object(s.jsx)(b,{data:t,removeItem:e.removeItem,toggleDone:e.toggleDone,editItem:e.editItem,addItem:e.addItem,parentKey:[]})},t.key)}))})},m=n(18),O=(n(15),function(e){var t=Object(c.useState)([]),n=Object(r.a)(t,2),a=n[0],i=n[1],u=function e(t,n){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.length-1;if(-1===c)return t;var a=n[c],i=t.findIndex((function(e){return e.key===a}));return t[i].subItems||(t[i].subItems=[]),e(t[i].subItems,n,--c)},d=function e(t,n){if(t.isDone=n,t.subItems){var c,a=Object(o.a)(t.subItems);try{for(a.s();!(c=a.n()).done;){e(c.value,n)}}catch(i){a.e(i)}finally{a.f()}}},f=function e(t,n){if(n.length>0){var c=n.shift(),a=u(t,n),i=a[a.findIndex((function(e){return e.key===c}))];i.subItems.reduce((function(e,t){return!!t.isDone&&e}),!0)===!i.isDone&&(i.isDone=!i.isDone,e(t,n))}},b=function(e){localStorage.setItem("items",JSON.stringify(e)),i(e)},O=function(e,t){var n=JSON.parse(JSON.stringify(a));u(n,t).push({name:e,key:m.a(),isDone:!1}),f(n,t),b(n)};return Object(c.useEffect)((function(){return i(JSON.parse(localStorage.getItem("items"))||[])}),[]),Object(s.jsxs)("div",{className:"ToDoList",children:[Object(s.jsx)(j,{addItem:O,parentKey:[],cancelAction:function(){}}),Object(s.jsx)(l,{items:a,removeItem:function(e,t){var n=JSON.parse(JSON.stringify(a)),c=u(n,t);c.splice(c.findIndex((function(t){return t.key===e})),1),f(n,t),b(n)},toggleDone:function(e,t){var n=JSON.parse(JSON.stringify(a)),c=u(n,t),i=c[c.findIndex((function(t){return t.key===e}))];d(i,!i.isDone),f(n,t),b(n)},editItem:function(e,t,n){var c=JSON.parse(JSON.stringify(a)),i=u(c,t);i[i.findIndex((function(t){return t.key===e}))]=n,b(c)},addItem:O})]})});i.a.render(Object(s.jsx)(O,{}),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.2ac8117f.chunk.js.map